<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>main</name>
    <events>
        <event-group description="" sid="751617101138721" title="Initialization">
            <sub-events>
                <event-block sid="969889480091034">
                    <conditions>
                        <condition id="-2" name="On start of layout" sid="716684668893007" type="System" />
                    </conditions>
                    <actions>
                        <action id="1" name="Connect" sid="662440699216008" type="backend">
                            <param id="0" name="Server">&quot;wss://multiplayer.scirra.com&quot;</param>
                        </action>
                        <action id="5" name="Set web font" sid="582649168133644" type="TEXT">
                            <param id="0" name="Family name">&quot;Quicksand&quot;</param>
                            <param id="1" name="CSS URL">&quot;https://fonts.googleapis.com/css?family=Quicksand&quot;</param>
                        </action>
                        <action id="0" name="Request camera" sid="948063613405043" type="UserMedia">
                            <param id="0" name="Source">0</param>
                            <param id="1" name="Preferred width">0</param>
                            <param id="2" name="Preferred height">0</param>
                        </action>
                        <action id="0" name="Set text" sid="197583758172621" type="qrCodeTxt">
                            <param id="0" name="Text">uppercase(left(IDgen.UuidV4,8))</param>
                        </action>
                        <action id="1" name="Encode" sid="324515220951438" type="DataMatrix">
                            <param id="0" name="Type">4</param>
                            <param id="1" name="Level">3</param>
                            <param id="2" name="Text string">qrCodeTxt.Text</param>
                        </action>
                        <action id="-9" name="Set value" sid="392811078736096" type="System">
                            <param id="0" name="Variable">sessionID</param>
                            <param id="1" name="Value">qrCodeTxt.Text</param>
                        </action>
                        <action id="-9" name="Destroy" sid="787440493239080" type="LineBG" />
                        <action id="-4" name="Set position to another object" sid="992815580166601" type="ListCtrl">
                            <param id="0" name="Object">ListHeader</param>
                            <param id="1" name="Image point (optional)">0</param>
                        </action>
                        <action id="-7" name="Set size" sid="524903946240024" type="TableBG">
                            <param id="0" name="Width">ListCtrl.Width</param>
                            <param id="1" name="Height">ListCtrl.Height</param>
                        </action>
                        <action id="-4" name="Set position to another object" sid="359858654277725" type="TableBG">
                            <param id="0" name="Object">ListCtrl</param>
                            <param id="1" name="Image point (optional)">0</param>
                        </action>
                        <action id="-3" name="Set position" sid="107044292333396" type="ListTail">
                            <param id="0" name="X">TableBG.BBoxLeft</param>
                            <param id="1" name="Y">TableBG.BBoxBottom</param>
                        </action>
                        <action id="-5" name="Set width" sid="892929898544188" type="ListHeader">
                            <param id="0" name="Width">ListCtrl.Width</param>
                        </action>
                        <action id="-5" name="Set width" sid="303902117742609" type="ListTail">
                            <param id="0" name="Width">ListCtrl.Width</param>
                        </action>
                        <action id="5" name="Set total lines count" sid="665383654696906" type="ListCtrl">
                            <param id="0" name="Total lines count">Items.Width</param>
                        </action>
                        <action id="0" name="Set text" sid="309056377448120" type="statusLog">
                            <param id="0" name="Text">&quot;Connecting to server... &quot;</param>
                        </action>
                        <action id="9" name="Scroll to bottom" sid="647789509503225" type="statusLog" />
                        <action id="1" name="Request project file" sid="247218558612945" type="AJAX">
                            <param id="0" name="Tag">&quot;apikey&quot;</param>
                            <param id="1" name="File">key.txt</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="565411269516017">
                    <conditions>
                        <condition id="0" name="On completed" sid="339343258963003" type="AJAX">
                            <param id="0" name="Tag">&quot;apikey&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-9" name="Set value" sid="664761356226098" type="System">
                            <param id="0" name="Variable">apikey</param>
                            <param id="1" name="Value">AJAX.LastData</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="460686642426863" title="QR Code">
            <sub-events>
                <event-block sid="178646166801010">
                    <conditions>
                        <condition id="-6" name="Every X seconds" sid="918146905521991" type="System">
                            <param id="0" name="Interval (seconds)">1.5</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="2" name="Snapshot" sid="197238925550594" type="UserMedia">
                            <param id="0" name="Format">1</param>
                            <param id="1" name="JPEG quality">75</param>
                        </action>
                        <action id="10" name="Load image from URL" sid="231173681378501" type="tempCode">
                            <param id="0" name="URI">UserMedia.SnapshotURL</param>
                            <param id="1" name="Size">0</param>
                            <param id="2" name="Cross-origin">0</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="201110418181885">
                    <conditions>
                        <condition id="10" name="On image URL loaded" sid="450826512158993" type="tempCode" />
                    </conditions>
                    <actions>
                        <action id="0" name="Decode" sid="258304242448835" type="QRDecode">
                            <param id="0" name="QR Code : ">tempCode</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="716287292664060">
                    <conditions>
                        <condition id="0" name="QR Decoded" sid="523502939445550" type="QRDecode" />
                    </conditions>
                    <actions>
                        <action id="0" name="Set text" sid="952689941863878" type="debug">
                            <param id="0" name="Text">QRDecode.decodedQRCode</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="710682421098600" title="Connection">
            <sub-events>
                <event-block sid="857540561065333">
                    <conditions>
                        <condition id="2" name="On connected" sid="140386185082467" type="backend" />
                    </conditions>
                    <actions>
                        <action id="4" name="Log in" sid="504319641167593" type="backend">
                            <param id="0" name="Alias">nickname</param>
                        </action>
                        <action id="0" name="Set text" sid="341321952065302" type="statusLog">
                            <param id="0" name="Text">statusLog.Text &amp; &quot; completed!&quot; &amp; newline &amp;  &quot;Logging in as &quot; &amp; nickname &amp; &quot;...&quot;</param>
                        </action>
                        <action id="9" name="Scroll to bottom" sid="188979223837052" type="statusLog" />
                    </actions>
                </event-block>
                <event-block sid="937669575586195">
                    <conditions>
                        <condition id="1" name="On error" sid="329299418195972" type="backend" />
                    </conditions>
                    <actions>
                        <action id="0" name="Set text" sid="880054399389476" type="statusLog">
                            <param id="0" name="Text">statusLog.Text &amp; &quot; error!&quot; &amp; newline &amp; &quot;Could not connecto to server!&quot;</param>
                        </action>
                        <action id="9" name="Scroll to bottom" sid="143697195483008" type="statusLog" />
                    </actions>
                </event-block>
                <event-block sid="914290274514906">
                    <conditions>
                        <condition id="4" name="On logged in" sid="551828922482818" type="backend" />
                    </conditions>
                    <actions>
                        <action id="5" name="Join room" sid="641068891226249" type="backend">
                            <param id="0" name="Game">&quot;djAPE-Tubeio&quot;</param>
                            <param id="1" name="Instance">&quot;default&quot;</param>
                            <param id="2" name="Room">sessionID</param>
                            <param id="3" name="Max peers">0</param>
                        </action>
                        <action id="0" name="Set text" sid="572161089144865" type="statusLog">
                            <param id="0" name="Text">statusLog.Text &amp; &quot; completed!&quot; &amp; newline &amp;&quot;Joining session... &quot;</param>
                        </action>
                        <action id="9" name="Scroll to bottom" sid="728817791148503" type="statusLog" />
                    </actions>
                </event-block>
                <event-block sid="838609835972924">
                    <conditions>
                        <condition id="5" name="On joined room" sid="154817003134037" type="backend" />
                    </conditions>
                    <actions>
                        <action id="0" name="Set text" sid="756203381729628" type="statusLog">
                            <param id="0" name="Text">statusLog.Text &amp; &quot;completed!&quot; &amp; newline &amp; &quot;All systems operational!&quot;</param>
                        </action>
                        <action id="9" name="Scroll to bottom" sid="541836394835567" type="statusLog" />
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="242199201842493" title="User Interface">
            <sub-events>
                <event-block sid="639431480166259">
                    <conditions>
                        <condition id="0" name="On clicked" sid="611106376539989" type="qrBtn" />
                    </conditions>
                    <actions>
                        <action id="-4" name="Set layer visible" sid="724593404892488" type="System">
                            <param id="0" name="Layer">&quot;QR&quot;</param>
                            <param id="1" name="Visibility">1</param>
                        </action>
                        <action id="-4" name="Set layer visible" sid="656086241489744" type="System">
                            <param id="0" name="Layer">&quot;UI&quot;</param>
                            <param id="1" name="Visibility">0</param>
                        </action>
                        <action id="-4" name="Set layer visible" sid="470375464245593" type="System">
                            <param id="0" name="Layer">&quot;Cover&quot;</param>
                            <param id="1" name="Visibility">0</param>
                        </action>
                    </actions>
                </event-block>
                <variable constant="0" name="index" sid="740944321863343" static="0" type="number">0</variable>
                <variable constant="0" name="remaining" sid="459825645877637" static="0" type="number">0</variable>
                <variable constant="0" name="code" sid="191418631200414" static="0" type="text"></variable>
                <event-block any="1" sid="287103018983308">
                    <conditions>
                        <condition id="0" name="On clicked" sid="589699029898617" type="submitBtn" />
                        <condition id="0" name="On key pressed" sid="396659047696300" type="Keyboard">
                            <param id="0" name="Key">13</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-9" name="Set value" sid="538285840741739" type="System">
                            <param id="0" name="Variable">index</param>
                            <param id="1" name="Value">find(ytLink.Text,&quot;=&quot;)</param>
                        </action>
                        <action id="-9" name="Set value" sid="564999566980096" type="System">
                            <param id="0" name="Variable">remaining</param>
                            <param id="1" name="Value">len(ytLink.Text) - index - 1</param>
                        </action>
                        <action id="-9" name="Set value" sid="270495764618454" type="System">
                            <param id="0" name="Variable">code</param>
                            <param id="1" name="Value">right(ytLink.Text,remaining)</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block any="1" sid="178243868898431">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="586564826086178" type="System">
                                    <param id="0" name="First value">left(ytLink.Text,23)</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Second value">&quot;https://www.youtube.com&quot;</param>
                                </condition>
                                <condition id="-8" name="Compare two values" sid="122260402828883" type="System">
                                    <param id="0" name="First value">left(ytLink.Text,22)</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Second value">&quot;http://www.youtube.com&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="0" name="Set text" sid="989877199654325" type="ytLink">
                                    <param id="0" name="Text">&quot;&quot;</param>
                                </action>
                                <action id="0" name="Call function" sid="440887229315174" type="func">
                                    <param id="0" name="Name">&quot;addTrack&quot;</param>
                                    <param id="1" name="Parameter {n}">code</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="598081200237993">
                            <conditions>
                                <condition id="-22" name="Else" sid="667693739244705" type="System" />
                            </conditions>
                            <actions>
                                <action id="0" name="Alert" sid="289485209890434" type="Browser">
                                    <param id="0" name="Message">&quot;Neispravan Youtube link!&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="813184452036157" title="List">
            <sub-events>
                <event-group description="" sid="180677723423782" title="Scroll bar">
                    <sub-events>
                        <comment>Create a line</comment>
                        <event-block sid="385298317894301">
                            <conditions>
                                <condition id="1" name="On line visible" sid="153066598673755" type="ListCtrl" />
                            </conditions>
                            <actions>
                                <action id="-3" name="Create object" sid="724505612378597" type="System">
                                    <param id="0" name="Object to create">LineBG</param>
                                    <param id="1" name="Layer">0</param>
                                    <param id="2" name="X">ListCtrl.LineTLX</param>
                                    <param id="3" name="Y">ListCtrl.LineTLY</param>
                                </action>
                                <action id="-5" name="Set width" sid="495977433316063" type="LineBG">
                                    <param id="0" name="Width">lerp(LineBG.Width,ListCtrl.Width,1)</param>
                                </action>
                                <action id="3" name="Pin instance" sid="417380268247622" type="ListCtrl">
                                    <param id="0" name="Instance">LineBG</param>
                                </action>
                                <action id="-4" name="Set position to another object" sid="295664514164817" type="listItem">
                                    <param id="0" name="Object">LineBG</param>
                                    <param id="1" name="Image point (optional)">&quot;Text&quot;</param>
                                </action>
                                <action id="0" name="Set text" sid="281095202642998" type="listItem">
                                    <param id="0" name="Text">ListCtrl.LineIndex +1 &amp; &quot;. &quot; &amp; Items.At(ListCtrl.LineIndex, 1)</param>
                                </action>
                                <action id="5" name="Set web font" sid="200824059328889" type="listItem">
                                    <param id="0" name="Family name">&quot;Quicksand&quot;</param>
                                    <param id="1" name="CSS URL">&quot;https://fonts.googleapis.com/css?family=Quicksand&quot;</param>
                                </action>
                                <action id="3" name="Pin instance" sid="628801726341961" type="ListCtrl">
                                    <param id="0" name="Instance">listItem</param>
                                </action>
                                <action id="-4" name="Set position to another object" sid="288695264630163" type="Checkbox">
                                    <param id="0" name="Object">LineBG</param>
                                    <param id="1" name="Image point (optional)">&quot;Checkbox&quot;</param>
                                </action>
                                <action id="5" name="Set frame" sid="861491829554389" type="Checkbox">
                                    <param id="0" name="Frame number">ListCtrl.At( ListCtrl.LineIndex, &quot;selected&quot;, 0 )</param>
                                </action>
                                <action id="3" name="Pin instance" sid="105692386860089" type="ListCtrl">
                                    <param id="0" name="Instance">Checkbox</param>
                                </action>
                                <action id="10" name="Load image from URL" sid="959678546799580" type="thumb">
                                    <param id="0" name="URI">Items.At(ListCtrl.LineIndex,2)</param>
                                    <param id="1" name="Size">0</param>
                                    <param id="2" name="Cross-origin">1</param>
                                </action>
                                <action id="-4" name="Set position to another object" sid="795876765944802" type="thumb">
                                    <param id="0" name="Object">LineBG</param>
                                    <param id="1" name="Image point (optional)">&quot;thumb&quot;</param>
                                </action>
                                <action id="3" name="Pin instance" sid="555934933752012" type="ListCtrl">
                                    <param id="0" name="Instance">thumb</param>
                                </action>
                            </actions>
                        </event-block>
                        <comment>Change property of a line</comment>
                        <event-block sid="220191122813707">
                            <conditions>
                                <condition id="3" name="On touched object" sid="220443458011418" type="TouchWrap">
                                    <param id="0" name="Object">Checkbox</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="5" name="Set frame" sid="919950536358108" type="Checkbox">
                                    <param id="0" name="Frame number">(Checkbox.AnimationFrame = 0)? 1:0</param>
                                </action>
                                <action id="11" name="Set value" sid="952053962151256" type="ListCtrl">
                                    <param id="0" name="Line index">ListCtrl.UID2LineIndex( LineBG.UID )</param>
                                    <param id="1" name="Key">&quot;selected&quot;</param>
                                    <param id="2" name="Value">Checkbox.AnimationFrame</param>
                                </action>
                                <action id="0" name="Call function" sid="390378663515007" type="func">
                                    <param id="0" name="Name">&quot;GetSelectedItems&quot;</param>
                                    <param id="1" name="Parameter {n}"></param>
                                </action>
                            </actions>
                        </event-block>
                        <comment>Show properties of current list</comment>
                        <event-block sid="489554453678318">
                            <conditions>
                                <condition id="0" name="On function" sid="571538772197307" type="func">
                                    <param id="0" name="Name">&quot;GetSelectedItems&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="0" name="Set text" sid="239533517190511" type="result">
                                    <param id="0" name="Text">&quot;&quot;</param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block sid="779802667948200">
                                    <conditions>
                                        <condition id="14" name="For each matched line" sid="898701075176753" type="ListCtrl">
                                            <param id="0" name="Key">&quot;selected&quot;</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">1</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="1" name="Append text" sid="313259708987597" type="result">
                                            <param id="0" name="Text">ListCtrl.LineIndex &amp; &quot;:&quot; &amp; Items.At( ListCtrl.LineIndex ) &amp; newline</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <comment>Drag scroll</comment>
                        <event-block sid="327484225852203">
                            <conditions>
                                <condition behavior="TouchArea" id="3" name="On touch moving" sid="696593985887037" type="ListCtrl" />
                                <condition id="4" inverted="1" name="Is touching object" sid="349522816804498" type="TouchWrap">
                                    <param id="0" name="Object">Checkbox</param>
                                </condition>
                                <condition behavior="DragDrop" id="0" inverted="1" name="Is dragging" sid="530906194912783" type="ListHeader" />
                            </conditions>
                            <actions>
                                <action id="2" name="Add to" sid="262574340129061" type="ListCtrl">
                                    <param id="0" name="Value">ListCtrl.TouchArea.DeltaY</param>
                                </action>
                            </actions>
                        </event-block>
                        <comment>Drag list</comment>
                        <event-block sid="533838109043293">
                            <conditions>
                                <condition behavior="DragDrop" id="1" name="On drag start" sid="341369841791476" type="ListHeader" />
                            </conditions>
                            <actions>
                                <action behavior="Pin" id="0" name="Pin to object" sid="945609580596190" type="ListCtrl">
                                    <param id="0" name="Pin to">ListHeader</param>
                                    <param id="1" name="Mode">1</param>
                                </action>
                                <action behavior="Pin" id="0" name="Pin to object" sid="296546487446420" type="TableBG">
                                    <param id="0" name="Pin to">ListHeader</param>
                                    <param id="1" name="Mode">0</param>
                                </action>
                                <action behavior="Pin" id="0" name="Pin to object" sid="903482033685659" type="ListTail">
                                    <param id="0" name="Pin to">ListHeader</param>
                                    <param id="1" name="Mode">1</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="560783371869730">
                            <conditions>
                                <condition behavior="DragDrop" id="2" name="On drop" sid="107642505669161" type="ListHeader" />
                            </conditions>
                            <actions>
                                <action behavior="Pin" id="1" name="Unpin" sid="573006513360268" type="ListCtrl" />
                                <action behavior="Pin" id="1" name="Unpin" sid="428535133767734" type="TableBG" />
                                <action behavior="Pin" id="1" name="Unpin" sid="207699491322329" type="ListTail" />
                            </actions>
                        </event-block>
                        <comment>Scrollbar</comment>
                        <event-block sid="681031323530253">
                            <conditions>
                                <condition behavior="DragDrop" id="0" inverted="1" name="Is dragging" sid="675349514505897" type="ListHeader" />
                            </conditions>
                            <actions />
                        </event-block>
                        <event-block sid="136591919541884">
                            <conditions />
                            <actions />
                        </event-block>
                    </sub-events>
                </event-group>
                <event-block sid="143064004452272">
                    <conditions>
                        <condition id="16" name="On any peer message" sid="343796000376698" type="backend" />
                    </conditions>
                    <actions>
                        <action id="5" name="Push" sid="135505525251094" type="Items">
                            <param id="0" name="Where">0</param>
                            <param id="1" name="Value">backend.Message</param>
                            <param id="2" name="Axis">0</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="158495084137460" title="Add track">
            <sub-events>
                <event-block sid="743139618110159">
                    <conditions>
                        <condition id="0" name="On function" sid="450294693653393" type="func">
                            <param id="0" name="Name">&quot;addTrack&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Request URL" sid="714553218788005" type="AJAX">
                            <param id="0" name="Tag">&quot;getInfo&quot;</param>
                            <param id="1" name="URL">&quot;https://www.googleapis.com/youtube/v3/videos?id=&quot; &amp; func.Param(0) &amp; &quot;&amp;key=&quot; &amp; apikey &amp;&quot;&amp;fields=items(id,snippet(title,thumbnails))&amp;part=snippet&quot;</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="278342241729532">
                    <conditions>
                        <condition id="0" name="On completed" sid="697107978880526" type="AJAX">
                            <param id="0" name="Tag">&quot;getInfo&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="60" name="LoadJSON" sid="604083381675023" type="JSON">
                            <param id="0" name="JSON">AJAX.LastData</param>
                            <param id="1" name="Reference point">0</param>
                            <param id="2" name="Key {n}"></param>
                        </action>
                        <action id="5" name="Push" sid="323615897908081" type="Items">
                            <param id="0" name="Where">0</param>
                            <param id="1" name="Value">JSON.Value(0, &quot;items&quot;, 0, &quot;id&quot;)</param>
                            <param id="2" name="Axis">0</param>
                        </action>
                        <action id="3" name="Set at XY" sid="654605167365834" type="Items">
                            <param id="0" name="X">Items.Width-1</param>
                            <param id="1" name="Y">1</param>
                            <param id="2" name="Value">JSON.Value(0, &quot;items&quot;, 0, &quot;snippet&quot;, &quot;title&quot;)</param>
                        </action>
                        <action id="3" name="Set at XY" sid="766016680953559" type="Items">
                            <param id="0" name="X">Items.Width-1</param>
                            <param id="1" name="Y">2</param>
                            <param id="2" name="Value">JSON.Value(0, &quot;items&quot;, 0, &quot;snippet&quot;, &quot;thumbnails&quot;, &quot;default&quot;, &quot;url&quot;)</param>
                        </action>
                        <action id="5" name="Set total lines count" sid="618568813443108" type="ListCtrl">
                            <param id="0" name="Total lines count">Items.Width</param>
                        </action>
                        <action id="0" name="Set text" sid="895606406954042" type="statusLog">
                            <param id="0" name="Text">statusLog.Text &amp; newline &amp; nickname &amp; &quot; just queued &quot; &amp; Items.At(Items.Width-1,1) &amp; &quot; into the playlist.&quot;</param>
                        </action>
                        <action id="9" name="Scroll to bottom" sid="353783394257580" type="statusLog" />
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
    </events>
</c2eventsheet>
