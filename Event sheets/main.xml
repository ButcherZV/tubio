<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>main</name>
    <events>
        <event-group description="" sid="751617101138721" title="Initialization">
            <sub-events>
                <event-block sid="969889480091034">
                    <conditions>
                        <condition id="-2" name="On start of layout" sid="716684668893007" type="System" />
                    </conditions>
                    <actions>
                        <action id="-9" name="Set value" sid="718513299049564" type="System">
                            <param id="0" name="Variable">nickname</param>
                            <param id="1" name="Value">Authentication.UserName</param>
                        </action>
                        <action id="1" name="Connect" sid="662440699216008" type="backend">
                            <param id="0" name="Server">&quot;wss://multiplayer.scirra.com&quot;</param>
                        </action>
                        <action id="5" name="Set web font" sid="582649168133644" type="TEXT">
                            <param id="0" name="Family name">&quot;Quicksand&quot;</param>
                            <param id="1" name="CSS URL">&quot;https://fonts.googleapis.com/css?family=Quicksand&quot;</param>
                        </action>
                        <action id="-9" name="Set value" sid="392811078736096" type="System">
                            <param id="0" name="Variable">sessionID</param>
                            <param id="1" name="Value">uppercase(left(IDgen.UuidV4,8))</param>
                        </action>
                        <action id="0" name="Set text" sid="197583758172621" type="txtQRcode">
                            <param id="0" name="Text">sessionID</param>
                        </action>
                        <action id="1" name="Encode" sid="324515220951438" type="DataMatrix">
                            <param id="0" name="Type">4</param>
                            <param id="1" name="Level">3</param>
                            <param id="2" name="Text string">sessionID</param>
                        </action>
                        <action id="-9" name="Destroy" sid="787440493239080" type="LineBG" />
                        <action id="0" name="Set text" sid="309056377448120" type="statusLog">
                            <param id="0" name="Text">&quot;Connecting to server... &quot;</param>
                        </action>
                        <action id="9" name="Scroll to bottom" sid="647789509503225" type="statusLog" />
                        <action id="1" name="Request project file" sid="586145416883350" type="AJAX">
                            <param id="0" name="Tag">&quot;api&quot;</param>
                            <param id="1" name="File">key.txt</param>
                        </action>
                        <action id="6" name="Set focused" sid="175201865909811" type="inputLink" />
                        <action id="10" name="Request fullscreen" sid="425242368632828" type="Browser">
                            <param id="0" name="Mode">3</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="727458885662962">
                            <conditions>
                                <condition id="-12" name="Repeat" sid="975553347456294" type="System">
                                    <param id="0" name="Count">6</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-3" name="Create object" sid="356671008722920" type="System">
                                    <param id="0" name="Object to create">LineBG</param>
                                    <param id="1" name="Layer">&quot;UI&quot;</param>
                                    <param id="2" name="X">1351</param>
                                    <param id="3" name="Y">73 + loopindex*120</param>
                                </action>
                                <action id="-10" name="Set value" sid="177748946528378" type="LineBG">
                                    <param id="0" name="Instance variable">id</param>
                                    <param id="1" name="Value">loopindex</param>
                                </action>
                                <action id="-4" name="Set position to another object" sid="508786567510057" type="txtListItem">
                                    <param id="0" name="Object">LineBG</param>
                                    <param id="1" name="Image point (optional)">&quot;Text&quot;</param>
                                </action>
                                <action id="5" name="Set web font" sid="168584150372817" type="txtListItem">
                                    <param id="0" name="Family name">&quot;Quicksand&quot;</param>
                                    <param id="1" name="CSS URL">&quot;https://fonts.googleapis.com/css?family=Quicksand&quot;</param>
                                </action>
                                <action id="-10" name="Set value" sid="862492033119227" type="txtListItem">
                                    <param id="0" name="Instance variable">id</param>
                                    <param id="1" name="Value">loopindex</param>
                                </action>
                                <action id="-4" name="Set position to another object" sid="410307417093253" type="playIcons">
                                    <param id="0" name="Object">LineBG</param>
                                    <param id="1" name="Image point (optional)">&quot;Checkbox&quot;</param>
                                </action>
                                <action id="-10" name="Set value" sid="372511396147043" type="playIcons">
                                    <param id="0" name="Instance variable">id</param>
                                    <param id="1" name="Value">loopindex</param>
                                </action>
                                <action id="-4" name="Set position to another object" sid="966336913259809" type="thumbImage">
                                    <param id="0" name="Object">LineBG</param>
                                    <param id="1" name="Image point (optional)">&quot;thumb&quot;</param>
                                </action>
                                <action id="-10" name="Set value" sid="443513409829935" type="thumbImage">
                                    <param id="0" name="Instance variable">kod</param>
                                    <param id="1" name="Value">loopindex</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="180566930367127">
                            <conditions>
                                <condition id="-33" name="Pick by comparison" sid="344580183227721" type="System">
                                    <param id="0" name="Object">box</param>
                                    <param id="1" name="Expression">box.id</param>
                                    <param id="2" name="Comparison">0</param>
                                    <param id="3" name="Value">1</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-7" name="Set size" sid="733782575504787" type="box">
                                    <param id="0" name="Width">ytPlayer.Width + 10</param>
                                    <param id="1" name="Height">ytPlayer.Height + 10</param>
                                </action>
                                <action id="-3" name="Set position" sid="992500387661958" type="box">
                                    <param id="0" name="X">ytPlayer.X - 3</param>
                                    <param id="1" name="Y">ytPlayer.Y - 3</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="338002433972334">
                    <conditions>
                        <condition id="0" name="On completed" sid="747904783597454" type="AJAX">
                            <param id="0" name="Tag">&quot;api&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-9" name="Set value" sid="565020829902033" type="System">
                            <param id="0" name="Variable">apikey</param>
                            <param id="1" name="Value">AJAX.LastData</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="710682421098600" title="Connection">
            <sub-events>
                <event-block sid="857540561065333">
                    <conditions>
                        <condition id="2" name="On connected" sid="140386185082467" type="backend" />
                    </conditions>
                    <actions>
                        <action id="4" name="Log in" sid="504319641167593" type="backend">
                            <param id="0" name="Alias">nickname</param>
                        </action>
                        <action id="0" name="Set text" sid="341321952065302" type="statusLog">
                            <param id="0" name="Text">statusLog.Text &amp; &quot; completed!&quot; &amp; newline &amp;  &quot;Logging in as &quot; &amp; nickname &amp; &quot;...&quot;</param>
                        </action>
                        <action id="9" name="Scroll to bottom" sid="188979223837052" type="statusLog" />
                    </actions>
                </event-block>
                <event-block sid="937669575586195">
                    <conditions>
                        <condition id="1" name="On error" sid="329299418195972" type="backend" />
                    </conditions>
                    <actions>
                        <action id="0" name="Set text" sid="880054399389476" type="statusLog">
                            <param id="0" name="Text">statusLog.Text &amp; &quot; error!&quot; &amp; newline &amp; &quot;Could not connecto to server!&quot;</param>
                        </action>
                        <action id="9" name="Scroll to bottom" sid="143697195483008" type="statusLog" />
                    </actions>
                </event-block>
                <event-block sid="914290274514906">
                    <conditions>
                        <condition id="4" name="On logged in" sid="551828922482818" type="backend" />
                    </conditions>
                    <actions>
                        <action id="5" name="Join room" sid="641068891226249" type="backend">
                            <param id="0" name="Game">&quot;djAPE-Tubeio&quot;</param>
                            <param id="1" name="Instance">&quot;default&quot;</param>
                            <param id="2" name="Room">sessionID</param>
                            <param id="3" name="Max peers">maxUsers</param>
                        </action>
                        <action id="0" name="Set text" sid="572161089144865" type="statusLog">
                            <param id="0" name="Text">statusLog.Text &amp; &quot; completed!&quot; &amp; newline &amp;&quot;Joining session... &quot;</param>
                        </action>
                        <action id="9" name="Scroll to bottom" sid="728817791148503" type="statusLog" />
                    </actions>
                </event-block>
                <event-block sid="838609835972924">
                    <conditions>
                        <condition id="5" name="On joined room" sid="154817003134037" type="backend" />
                    </conditions>
                    <actions>
                        <action id="0" name="Set text" sid="756203381729628" type="statusLog">
                            <param id="0" name="Text">statusLog.Text &amp; &quot;completed!&quot; &amp; newline &amp; &quot;You can now start with sharing songs.&quot;</param>
                        </action>
                        <action id="9" name="Scroll to bottom" sid="541836394835567" type="statusLog" />
                        <action id="10" name="Set item text" sid="568210531831253" type="clientList">
                            <param id="0" name="Index">0</param>
                            <param id="1" name="Text">nickname &amp; &quot; (host)&quot;</param>
                        </action>
                        <action id="0" name="Call function" sid="642869435170098" type="func">
                            <param id="0" name="Name">&quot;updateStats&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                        <action id="3" name="Set enabled" sid="175828980744697" type="qrBtn">
                            <param id="0" name="Mode">1</param>
                        </action>
                        <action id="3" name="Set enabled" sid="859651585789455" type="submitBtn">
                            <param id="0" name="Mode">1</param>
                        </action>
                        <action id="4" name="Set enabled" sid="249369050062366" type="inputLink">
                            <param id="0" name="Mode">1</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="306298842987291">
                    <conditions>
                        <condition id="1" name="On error" sid="919570160534844" type="backend" />
                    </conditions>
                    <actions>
                        <action id="0" name="Set text" sid="971695709891784" type="statusLog">
                            <param id="0" name="Text">statusLog.Text &amp; newline &amp; &quot;ERROR: &quot; &amp; backend.ErrorMessage</param>
                        </action>
                        <action id="9" name="Scroll to bottom" sid="224173243860172" type="statusLog" />
                    </actions>
                </event-block>
                <event-block sid="341669072725490">
                    <conditions>
                        <condition id="13" name="On peer disconnected" sid="439653936510775" type="backend" />
                    </conditions>
                    <actions>
                        <action id="0" name="Set text" sid="673806865818862" type="statusLog">
                            <param id="0" name="Text">statusLog.Text &amp; newline &amp; backend.PeerAlias &amp; &quot; has been disconnected from the service.&quot;</param>
                        </action>
                        <action id="9" name="Scroll to bottom" sid="249674433309040" type="statusLog" />
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="242199201842493" title="Buttons and mouse">
            <sub-events>
                <comment>Move playlist up</comment>
                <event-block sid="698581854548045">
                    <conditions>
                        <condition id="8" name="On mouse wheel" sid="177290381496218" type="Mouse">
                            <param id="0" name="Direction">1</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="426529051489523">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="956632095575399" type="System">
                                    <param id="0" name="First value">orderNo</param>
                                    <param id="1" name="Comparison">4</param>
                                    <param id="2" name="Second value">1</param>
                                </condition>
                                <condition id="-14" name="Compare variable" sid="584073624081766" type="System">
                                    <param id="0" name="Variable">start</param>
                                    <param id="1" name="Comparison">4</param>
                                    <param id="2" name="Value">0</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-11" name="Subtract from" sid="167249705080578" type="System">
                                    <param id="0" name="Variable">start</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                                <action id="-9" name="Set value" sid="324427119826190" type="System">
                                    <param id="0" name="Variable">buffer</param>
                                    <param id="1" name="Value">Items.At(Items.Width-1,0) &amp; &quot;;&quot; &amp; Items.At(Items.Width-1,1) &amp; &quot;;&quot; &amp; Items.At(Items.Width-1,2) &amp; &quot;;&quot; &amp; Items.At(Items.Width-1,3)</param>
                                </action>
                                <action id="6" name="Pop" sid="909048478510526" type="Items">
                                    <param id="0" name="Where">0</param>
                                    <param id="1" name="Axis">0</param>
                                </action>
                                <action id="5" name="Push" sid="964120077827742" type="Items">
                                    <param id="0" name="Where">1</param>
                                    <param id="1" name="Value">0</param>
                                    <param id="2" name="Axis">0</param>
                                </action>
                                <action id="3" name="Set at XY" sid="838546039279220" type="Items">
                                    <param id="0" name="X">0</param>
                                    <param id="1" name="Y">0</param>
                                    <param id="2" name="Value">tokenat(buffer,0,&quot;;&quot;)</param>
                                </action>
                                <action id="3" name="Set at XY" sid="749005589109625" type="Items">
                                    <param id="0" name="X">0</param>
                                    <param id="1" name="Y">1</param>
                                    <param id="2" name="Value">tokenat(buffer,1,&quot;;&quot;)</param>
                                </action>
                                <action id="3" name="Set at XY" sid="443339247649502" type="Items">
                                    <param id="0" name="X">0</param>
                                    <param id="1" name="Y">2</param>
                                    <param id="2" name="Value">tokenat(buffer,2,&quot;;&quot;)</param>
                                </action>
                                <action id="3" name="Set at XY" sid="561102104614134" type="Items">
                                    <param id="0" name="X">0</param>
                                    <param id="1" name="Y">3</param>
                                    <param id="2" name="Value">tokenat(buffer,3,&quot;;&quot;)</param>
                                </action>
                                <action id="-11" name="Subtract from" sid="130750390438065" type="System">
                                    <param id="0" name="Variable">orderNo</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                                <action id="0" name="Call function" sid="828784394461572" type="func">
                                    <param id="0" name="Name">&quot;populateList&quot;</param>
                                    <param id="1" name="Parameter {n}"></param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment>Move playlist down</comment>
                <event-block sid="437056363690353">
                    <conditions>
                        <condition id="8" name="On mouse wheel" sid="182869943774304" type="Mouse">
                            <param id="0" name="Direction">0</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="231916681225720">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="421907969912572" type="System">
                                    <param id="0" name="First value">Items.Width</param>
                                    <param id="1" name="Comparison">5</param>
                                    <param id="2" name="Second value">7</param>
                                </condition>
                                <condition id="-8" name="Compare two values" sid="764514634181527" type="System">
                                    <param id="0" name="First value">orderNo + 6</param>
                                    <param id="1" name="Comparison">3</param>
                                    <param id="2" name="Second value">Items.Width</param>
                                </condition>
                                <condition id="-8" name="Compare two values" sid="497166089606028" type="System">
                                    <param id="0" name="First value">start + 6</param>
                                    <param id="1" name="Comparison">3</param>
                                    <param id="2" name="Second value">Items.Width</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-10" name="Add to" sid="655602303679111" type="System">
                                    <param id="0" name="Variable">start</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                                <action id="-9" name="Set value" sid="142052365862060" type="System">
                                    <param id="0" name="Variable">buffer</param>
                                    <param id="1" name="Value">Items.At(0,0) &amp; &quot;;&quot; &amp; Items.At(0,1) &amp; &quot;;&quot; &amp; Items.At(0,2) &amp; &quot;;&quot; &amp; Items.At(0,3)</param>
                                </action>
                                <action id="6" name="Pop" sid="369715783482589" type="Items">
                                    <param id="0" name="Where">1</param>
                                    <param id="1" name="Axis">0</param>
                                </action>
                                <action id="5" name="Push" sid="198940253167567" type="Items">
                                    <param id="0" name="Where">0</param>
                                    <param id="1" name="Value">0</param>
                                    <param id="2" name="Axis">0</param>
                                </action>
                                <action id="3" name="Set at XY" sid="567196455437948" type="Items">
                                    <param id="0" name="X">Items.Width-1</param>
                                    <param id="1" name="Y">0</param>
                                    <param id="2" name="Value">tokenat(buffer,0,&quot;;&quot;)</param>
                                </action>
                                <action id="3" name="Set at XY" sid="311234416779740" type="Items">
                                    <param id="0" name="X">Items.Width-1</param>
                                    <param id="1" name="Y">1</param>
                                    <param id="2" name="Value">tokenat(buffer,1,&quot;;&quot;)</param>
                                </action>
                                <action id="3" name="Set at XY" sid="811544688122566" type="Items">
                                    <param id="0" name="X">Items.Width-1</param>
                                    <param id="1" name="Y">2</param>
                                    <param id="2" name="Value">tokenat(buffer,2,&quot;;&quot;)</param>
                                </action>
                                <action id="3" name="Set at XY" sid="216532917649124" type="Items">
                                    <param id="0" name="X">Items.Width-1</param>
                                    <param id="1" name="Y">3</param>
                                    <param id="2" name="Value">tokenat(buffer,3,&quot;;&quot;)</param>
                                </action>
                                <action id="-10" name="Add to" sid="155289392781282" type="System">
                                    <param id="0" name="Variable">orderNo</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                                <action id="0" name="Call function" sid="540349776755762" type="func">
                                    <param id="0" name="Name">&quot;populateList&quot;</param>
                                    <param id="1" name="Parameter {n}"></param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment>Set cursor style, if it&apos;s above text or thumb image</comment>
                <event-block any="1" sid="949225884019102">
                    <conditions>
                        <condition id="7" name="Cursor is over object" sid="837617346068310" type="Mouse">
                            <param id="0" name="Object">thumbImage</param>
                        </condition>
                        <condition id="7" name="Cursor is over object" sid="376612126073779" type="Mouse">
                            <param id="0" name="Object">txtListItem</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Set cursor style" sid="532724746599736" type="Mouse">
                            <param id="0" name="Cursor style">1</param>
                        </action>
                        <action id="4" name="Set CSS style" sid="778765759867815" type="thumbImage">
                            <param id="0" name="Property name">&quot;cursor&quot;</param>
                            <param id="1" name="Value">&quot;pointer&quot;</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="564783823002185">
                    <conditions>
                        <condition id="-22" name="Else" sid="111304052396255" type="System" />
                    </conditions>
                    <actions>
                        <action id="0" name="Set cursor style" sid="748356057082047" type="Mouse">
                            <param id="0" name="Cursor style">0</param>
                        </action>
                        <action id="4" name="Set CSS style" sid="848649079727341" type="thumbImage">
                            <param id="0" name="Property name">&quot;cursor&quot;</param>
                            <param id="1" name="Value">&quot;default&quot;</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Open QR code window</comment>
                <event-block sid="639431480166259">
                    <conditions>
                        <condition id="0" name="On clicked" sid="611106376539989" type="qrBtn" />
                    </conditions>
                    <actions>
                        <action id="-4" name="Set layer visible" sid="724593404892488" type="System">
                            <param id="0" name="Layer">&quot;QR&quot;</param>
                            <param id="1" name="Visibility">1</param>
                        </action>
                        <action id="-4" name="Set layer visible" sid="527793478285805" type="System">
                            <param id="0" name="Layer">&quot;UI&quot;</param>
                            <param id="1" name="Visibility">0</param>
                        </action>
                        <action id="-4" name="Set layer visible" sid="135970692193006" type="System">
                            <param id="0" name="Layer">&quot;Cover&quot;</param>
                            <param id="1" name="Visibility">0</param>
                        </action>
                        <action id="8" name="Set unfocused" sid="324712886458483" type="qrBtn" />
                    </actions>
                </event-block>
                <comment>Close QR code window</comment>
                <event-block sid="553657666856716">
                    <conditions>
                        <condition id="0" name="On clicked" sid="304970700310428" type="backBtn" />
                    </conditions>
                    <actions>
                        <action id="-4" name="Set layer visible" sid="428758954854013" type="System">
                            <param id="0" name="Layer">&quot;QR&quot;</param>
                            <param id="1" name="Visibility">0</param>
                        </action>
                        <action id="-4" name="Set layer visible" sid="152444135806805" type="System">
                            <param id="0" name="Layer">&quot;UI&quot;</param>
                            <param id="1" name="Visibility">1</param>
                        </action>
                        <action id="-4" name="Set layer visible" sid="782612872471407" type="System">
                            <param id="0" name="Layer">&quot;Cover&quot;</param>
                            <param id="1" name="Visibility">1</param>
                        </action>
                        <action id="8" name="Set unfocused" sid="266333443088374" type="backBtn" />
                    </actions>
                </event-block>
                <comment>Play specific track on playlist by clicking on it&apos;s thumbnail image or text</comment>
                <event-block sid="551415370309749">
                    <conditions>
                        <condition id="6" name="On object clicked" sid="288529482742028" type="Mouse">
                            <param id="0" name="Mouse button">0</param>
                            <param id="1" name="Click type">0</param>
                            <param id="2" name="Object clicked">thumbImage</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="321525867794246">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="962015357531932" type="thumbImage">
                                    <param id="0" name="Instance variable">link</param>
                                    <param id="1" name="Comparison">1</param>
                                    <param id="2" name="Value">&quot;&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="3" name="Set at XY" sid="816598533445396" type="Items">
                                    <param id="0" name="X">currentTackNo</param>
                                    <param id="1" name="Y">3</param>
                                    <param id="2" name="Value">0</param>
                                </action>
                                <action id="-9" name="Set value" sid="493496203443896" type="System">
                                    <param id="0" name="Variable">currentTackNo</param>
                                    <param id="1" name="Value">thumbImage.number</param>
                                </action>
                                <action id="0" name="Call function" sid="252831263788986" type="func">
                                    <param id="0" name="Name">&quot;populateList&quot;</param>
                                    <param id="1" name="Parameter {n}"></param>
                                </action>
                                <action id="0" name="Call function" sid="755657243978769" type="func">
                                    <param id="0" name="Name">&quot;play&quot;</param>
                                    <param id="1" name="Parameter {n}">currentTackNo</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="248752453846596">
                    <conditions>
                        <condition id="6" name="On object clicked" sid="523715188588932" type="Mouse">
                            <param id="0" name="Mouse button">0</param>
                            <param id="1" name="Click type">0</param>
                            <param id="2" name="Object clicked">txtListItem</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="192828678279248">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="576804701721346" type="txtListItem">
                                    <param id="0" name="Instance variable">link</param>
                                    <param id="1" name="Comparison">1</param>
                                    <param id="2" name="Value">&quot;&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="3" name="Set at XY" sid="749228045171749" type="Items">
                                    <param id="0" name="X">currentTackNo</param>
                                    <param id="1" name="Y">3</param>
                                    <param id="2" name="Value">0</param>
                                </action>
                                <action id="-9" name="Set value" sid="842743163297995" type="System">
                                    <param id="0" name="Variable">currentTackNo</param>
                                    <param id="1" name="Value">txtListItem.number</param>
                                </action>
                                <action id="0" name="Call function" sid="973519752241397" type="func">
                                    <param id="0" name="Name">&quot;populateList&quot;</param>
                                    <param id="1" name="Parameter {n}"></param>
                                </action>
                                <action id="0" name="Call function" sid="304913701658178" type="func">
                                    <param id="0" name="Name">&quot;play&quot;</param>
                                    <param id="1" name="Parameter {n}">currentTackNo</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment>Add track to playlist</comment>
                <variable constant="0" name="index" sid="740944321863343" static="0" type="number">0</variable>
                <variable constant="0" name="remaining" sid="459825645877637" static="0" type="number">0</variable>
                <variable constant="0" name="code" sid="191418631200414" static="0" type="text"></variable>
                <event-block any="1" sid="287103018983308">
                    <conditions>
                        <condition id="0" name="On clicked" sid="589699029898617" type="submitBtn" />
                        <condition id="0" name="On key pressed" sid="396659047696300" type="Keyboard">
                            <param id="0" name="Key">13</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-9" name="Set value" sid="538285840741739" type="System">
                            <param id="0" name="Variable">index</param>
                            <param id="1" name="Value">find(inputLink.Text,&quot;=&quot;)</param>
                        </action>
                        <action id="-9" name="Set value" sid="564999566980096" type="System">
                            <param id="0" name="Variable">remaining</param>
                            <param id="1" name="Value">len(inputLink.Text) - index - 1</param>
                        </action>
                        <action id="-9" name="Set value" sid="270495764618454" type="System">
                            <param id="0" name="Variable">code</param>
                            <param id="1" name="Value">right(inputLink.Text,remaining)</param>
                        </action>
                        <action id="8" name="Set unfocused" sid="454295920402673" type="submitBtn" />
                        <action id="6" name="Set focused" sid="395827791893538" type="inputLink" />
                    </actions>
                    <sub-events>
                        <event-block any="1" sid="178243868898431">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="586564826086178" type="System">
                                    <param id="0" name="First value">find(inputLink.Text,&quot;https://www.youtube.com/watch?v=&quot;)</param>
                                    <param id="1" name="Comparison">1</param>
                                    <param id="2" name="Second value">-1</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="0" name="Call function" sid="440887229315174" type="func">
                                    <param id="0" name="Name">&quot;addTrack&quot;</param>
                                    <param id="1" name="Parameter {n}">code</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="598081200237993">
                            <conditions>
                                <condition id="-22" name="Else" sid="667693739244705" type="System" />
                            </conditions>
                            <actions>
                                <action id="0" name="Alert" sid="289485209890434" type="Browser">
                                    <param id="0" name="Message">&quot;Neispravan Youtube link!&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="473995541856600">
                            <conditions />
                            <actions>
                                <action id="0" name="Set text" sid="989877199654325" type="inputLink">
                                    <param id="0" name="Text">&quot;&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="813184452036157" title="Playlist">
            <sub-events>
                <comment>When song is recieved by user, add it to playlist</comment>
                <event-block sid="143064004452272">
                    <conditions>
                        <condition id="16" name="On any peer message" sid="343796000376698" type="backend" />
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="135505525251094" type="func">
                            <param id="0" name="Name">&quot;addTrack&quot;</param>
                            <param id="1" name="Parameter {n}">backend.Message</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="711888682232884">
                    <conditions>
                        <condition id="0" name="On function" sid="334255581331043" type="func">
                            <param id="0" name="Name">&quot;populateList&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="839710671828793">
                            <conditions>
                                <condition id="-12" name="Repeat" sid="672372623361824" type="System">
                                    <param id="0" name="Count">Items.Width &lt;= 7 ? Items.Width : 6</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <event-block sid="495389720861454">
                                    <conditions>
                                        <condition id="-33" name="Pick by comparison" sid="806403841191631" type="System">
                                            <param id="0" name="Object">LineBG</param>
                                            <param id="1" name="Expression">LineBG.id</param>
                                            <param id="2" name="Comparison">0</param>
                                            <param id="3" name="Value">loopindex</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="0" name="Set text" sid="302768274842790" type="txtListItem">
                                            <param id="0" name="Text">loopindex+orderNo &amp; &quot;. &quot; &amp;Items.At(loopindex,1)</param>
                                        </action>
                                        <action id="-10" name="Set value" sid="299255004971642" type="txtListItem">
                                            <param id="0" name="Instance variable">link</param>
                                            <param id="1" name="Value">Items.At(loopindex,0)</param>
                                        </action>
                                        <action id="-10" name="Set value" sid="498009299994882" type="txtListItem">
                                            <param id="0" name="Instance variable">number</param>
                                            <param id="1" name="Value">Items.IndexOf(Items.At(loopindex,0))</param>
                                        </action>
                                        <action id="6" name="Set HTML" sid="616628651488990" type="thumbImage">
                                            <param id="0" name="Set HTML">&quot;&lt;img class=fill src=&apos;&quot; &amp; Items.At(loopindex,2) &amp; &quot;&apos;&gt;&quot;</param>
                                        </action>
                                        <action id="-10" name="Set value" sid="862265451297623" type="thumbImage">
                                            <param id="0" name="Instance variable">link</param>
                                            <param id="1" name="Value">Items.At(loopindex,0)</param>
                                        </action>
                                        <action id="5" name="Set frame" sid="635795136421370" type="playIcons">
                                            <param id="0" name="Frame number">Items.At(loopindex,3)</param>
                                        </action>
                                        <action id="-10" name="Set value" sid="557457660704481" type="playIcons">
                                            <param id="0" name="Instance variable">link</param>
                                            <param id="1" name="Value">Items.At(loopindex,0)</param>
                                        </action>
                                        <action id="-10" name="Set value" sid="335189469441034" type="playIcons">
                                            <param id="0" name="Instance variable">no</param>
                                            <param id="1" name="Value">start + loopindex</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="158495084137460" title="Add track to playlist">
            <sub-events>
                <comment>With this function I&apos;m getting track info from YouTube API.&#x0D;&#x0A;Video ID has to be passed as parameter 0</comment>
                <event-block sid="743139618110159">
                    <conditions>
                        <condition id="0" name="On function" sid="450294693653393" type="func">
                            <param id="0" name="Name">&quot;addTrack&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Request URL" sid="714553218788005" type="AJAX">
                            <param id="0" name="Tag">&quot;getInfo&quot;</param>
                            <param id="1" name="URL">&quot;https://www.googleapis.com/youtube/v3/videos?id=&quot; &amp; func.Param(0) &amp; &quot;&amp;key=&quot;&amp; apikey &amp;&quot;&amp;fields=items(id,snippet(title,thumbnails))&amp;part=snippet&quot;</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Saving JSON response and storing it&apos;s values inside array</comment>
                <event-block sid="278342241729532">
                    <conditions>
                        <condition id="0" name="On completed" sid="697107978880526" type="AJAX">
                            <param id="0" name="Tag">&quot;getInfo&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="60" name="LoadJSON" sid="604083381675023" type="JSON">
                            <param id="0" name="JSON">AJAX.LastData</param>
                            <param id="1" name="Reference point">0</param>
                            <param id="2" name="Key {n}"></param>
                        </action>
                        <action id="5" name="Push" sid="323615897908081" type="Items">
                            <param id="0" name="Where">0</param>
                            <param id="1" name="Value">JSON.Value(0, &quot;items&quot;, 0, &quot;id&quot;)</param>
                            <param id="2" name="Axis">0</param>
                        </action>
                        <action id="3" name="Set at XY" sid="654605167365834" type="Items">
                            <param id="0" name="X">Items.Width-1</param>
                            <param id="1" name="Y">1</param>
                            <param id="2" name="Value">JSON.Value(0, &quot;items&quot;, 0, &quot;snippet&quot;, &quot;title&quot;)</param>
                        </action>
                        <action id="3" name="Set at XY" sid="766016680953559" type="Items">
                            <param id="0" name="X">Items.Width-1</param>
                            <param id="1" name="Y">2</param>
                            <param id="2" name="Value">JSON.Value(0, &quot;items&quot;, 0, &quot;snippet&quot;, &quot;thumbnails&quot;, &quot;default&quot;, &quot;url&quot;)</param>
                        </action>
                        <action id="3" name="Set at XY" sid="198312900561753" type="Items">
                            <param id="0" name="X">Items.Width-1</param>
                            <param id="1" name="Y">3</param>
                            <param id="2" name="Value">0</param>
                        </action>
                        <action id="0" name="Set text" sid="895606406954042" type="statusLog">
                            <param id="0" name="Text">statusLog.Text &amp; newline &amp; nickname &amp; &quot; just queued &quot; &amp; Items.At(Items.Width-1,1) &amp; &quot; into the playlist.&quot;</param>
                        </action>
                        <action id="9" name="Scroll to bottom" sid="353783394257580" type="statusLog" />
                        <action id="-10" name="Add to" sid="981328139984143" type="System">
                            <param id="0" name="Variable">sharedSongs</param>
                            <param id="1" name="Value">1</param>
                        </action>
                        <action id="0" name="Call function" sid="439331602818177" type="func">
                            <param id="0" name="Name">&quot;updateStats&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                    </actions>
                    <sub-events>
                        <comment>If this is first queued song, play it immediately</comment>
                        <event-block sid="585159127250543">
                            <conditions>
                                <condition id="-8" name="Is boolean instance variable set" sid="249022256785463" type="Items">
                                    <param id="0" name="Instance variable">first</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="0" name="Call function" sid="417213957344521" type="func">
                                    <param id="0" name="Name">&quot;play&quot;</param>
                                    <param id="1" name="Parameter {n}">currentTackNo</param>
                                </action>
                                <action id="-13" name="Set boolean" sid="320786442038671" type="Items">
                                    <param id="0" name="Instance variable">first</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="219534652738170">
                            <conditions />
                            <actions>
                                <action id="0" name="Call function" sid="155581788433393" type="func">
                                    <param id="0" name="Name">&quot;populateList&quot;</param>
                                    <param id="1" name="Parameter {n}"></param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="479202626146132" title="YouTube Player">
            <sub-events>
                <event-block sid="881254812135844">
                    <conditions>
                        <condition id="0" name="On function" sid="297515238378750" type="func">
                            <param id="0" name="Name">&quot;play&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="3" name="Set at XY" sid="936492670559609" type="Items">
                            <param id="0" name="X">currentTackNo</param>
                            <param id="1" name="Y">3</param>
                            <param id="2" name="Value">3</param>
                        </action>
                        <action id="0" name="Load video" sid="885565748386057" type="ytPlayer">
                            <param id="0" name="Video ID">Items.At(func.Param(0),0)</param>
                            <param id="1" name="Play">1</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="540632943080522">
                    <conditions>
                        <condition id="4" name="On playback event" sid="158284395538759" type="ytPlayer">
                            <param id="0" name="Event">1</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="3" name="Set at XY" sid="131841735695997" type="Items">
                            <param id="0" name="X">currentTackNo</param>
                            <param id="1" name="Y">3</param>
                            <param id="2" name="Value">0</param>
                        </action>
                        <action id="0" name="Call function" sid="496900796667885" type="func">
                            <param id="0" name="Name">&quot;populateList&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                        <action id="-10" name="Add to" sid="364261327858779" type="System">
                            <param id="0" name="Variable">currentTackNo</param>
                            <param id="1" name="Value">1</param>
                        </action>
                        <action id="0" name="Call function" sid="626596619581930" type="func">
                            <param id="0" name="Name">&quot;play&quot;</param>
                            <param id="1" name="Parameter {n}">currentTackNo</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="247233842393099">
                    <conditions>
                        <condition id="4" name="On playback event" sid="661237001895234" type="ytPlayer">
                            <param id="0" name="Event">2</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="3" name="Set at XY" sid="635231041760220" type="Items">
                            <param id="0" name="X">currentTackNo</param>
                            <param id="1" name="Y">3</param>
                            <param id="2" name="Value">1</param>
                        </action>
                        <action id="0" name="Call function" sid="896157382947089" type="func">
                            <param id="0" name="Name">&quot;populateList&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="464726066724302">
                    <conditions>
                        <condition id="4" name="On playback event" sid="410899252967820" type="ytPlayer">
                            <param id="0" name="Event">3</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="3" name="Set at XY" sid="454982260784882" type="Items">
                            <param id="0" name="X">currentTackNo</param>
                            <param id="1" name="Y">3</param>
                            <param id="2" name="Value">2</param>
                        </action>
                        <action id="0" name="Call function" sid="665880824427411" type="func">
                            <param id="0" name="Name">&quot;populateList&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="690012332191803" title="User list">
            <sub-events>
                <event-block sid="523265144499812">
                    <conditions>
                        <condition id="11" name="On peer connected" sid="510293731980779" type="backend" />
                    </conditions>
                    <actions>
                        <action id="0" name="Set text" sid="823233563836452" type="statusLog">
                            <param id="0" name="Text">Self.Text &amp; newline &amp; backend.PeerAlias &amp; &quot; has connected.&quot;</param>
                        </action>
                        <action id="7" name="Add item" sid="508988991701714" type="clientList">
                            <param id="0" name="Text">backend.PeerAlias</param>
                        </action>
                        <action id="0" name="Call function" sid="574090327929994" type="func">
                            <param id="0" name="Name">&quot;updateStats&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="481033128590739">
                    <conditions>
                        <condition id="13" name="On peer disconnected" sid="706838057346350" type="backend" />
                    </conditions>
                    <actions>
                        <action id="0" name="Set text" sid="710368375239812" type="statusLog">
                            <param id="0" name="Text">Self.Text &amp; newline &amp; backend.PeerAlias &amp; &quot; has disconnected.&quot;</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="536914099379764">
                            <conditions>
                                <condition id="-12" name="Repeat" sid="113432632410260" type="System">
                                    <param id="0" name="Count">clientList.ItemCount</param>
                                </condition>
                                <condition id="5" name="Compare item text at" sid="874410996479904" type="clientList">
                                    <param id="0" name="Index">loopindex</param>
                                    <param id="1" name="Text to compare">backend.PeerAlias</param>
                                    <param id="2" name="Case sensitivity">1</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="9" name="Remove" sid="153206071636105" type="clientList">
                                    <param id="0" name="Index">loopindex</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="582010549092949">
                    <conditions>
                        <condition id="0" name="On function" sid="992118930901551" type="func">
                            <param id="0" name="Name">&quot;updateStats&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <variable constant="0" name="users" sid="953727067116571" static="0" type="text"></variable>
                        <variable constant="0" name="songs" sid="675818952935716" static="0" type="text"></variable>
                        <event-block sid="400976236822752">
                            <conditions />
                            <actions>
                                <action id="-9" name="Set value" sid="703563602729399" type="System">
                                    <param id="0" name="Variable">users</param>
                                    <param id="1" name="Value">backend.PeerCount &lt; 2 ? &quot; user&quot; : &quot; users&quot;</param>
                                </action>
                                <action id="-9" name="Set value" sid="829260759833120" type="System">
                                    <param id="0" name="Variable">songs</param>
                                    <param id="1" name="Value">sharedSongs &lt; 2 ? &quot; song&quot; : &quot; songs&quot;</param>
                                </action>
                                <action id="0" name="Set text" sid="590565797694087" type="txtStats">
                                    <param id="0" name="Text">&quot;STATS: &quot; &amp; backend.PeerCount &amp; users &amp; &quot; connected / &quot; &amp; sharedSongs &amp; songs &amp; &quot; shared.&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
    </events>
</c2eventsheet>
